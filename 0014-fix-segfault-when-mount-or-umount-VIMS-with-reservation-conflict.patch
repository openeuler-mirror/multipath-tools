diff -uNr a/libmpathpersist/mpath_persist.c b/libmpathpersist/mpath_persist.c
--- a/libmpathpersist/mpath_persist.c	2017-05-24 11:01:39.000000000 +0800
+++ b/libmpathpersist/mpath_persist.c	2017-05-24 11:02:22.000000000 +0800
@@ -510,10 +510,10 @@
 		if (!rollback && (thread[i].param.status == MPATH_PR_RESERV_CONFLICT)){
 			rollback = 1;
 			sa_key = 0;
-			for (i = 0; i < 8; ++i){
-				if (i > 0)
+			for (j = 0; j < 8; ++j){
+				if (j > 0)
 					sa_key <<= 8;
-				sa_key |= paramp->sa_key[i];
+				sa_key |= paramp->sa_key[j];
 			}
 			status = MPATH_PR_RESERV_CONFLICT ;
 		}
